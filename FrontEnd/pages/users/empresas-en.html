<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="title-text">Dashboard Empresa - Legado TP</title>
    <link rel="stylesheet" href="../assets/css/dashboard.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- HEADER -->
    <header class="dashboard-header">
      <div class="logo-container">
        <img
          src="../assets/img/logo.png"
          alt="Logo institucional"
          class="logo"
        />
        <span class="brand">ãƒ¬ã‚¬ãƒ‰-TP</span>
      </div>

      <nav class="dashboard-nav" aria-label="Main Navigation">
        <a href="#inicio" id="nav-inicio">Inicio</a>
        <a href="#trabajos" id="nav-trabajos">Trabajos</a>
        <a href="#practicas" id="nav-practicas">PrÃ¡cticas</a>
        <a href="{{ url_for('perfil') }}" id="nav-perfil">Perfil</a>
      </nav>

      {% if nombre %}
      <div class="user-info">
        <span id="welcome-text">Bienvenido, {{ nombre }}</span>
        <form method="post" action="{{ url_for('logout') }}">
          <button type="submit" class="btn-logout" id="btn-logout">
            Cerrar SesiÃ³n
          </button>
        </form>
      </div>
      {% endif %}

      <!-- SELECTOR DE IDIOMA -->
      <div class="header-language">
        <label for="language-select">Idioma:</label>
        <select
          id="language-select"
          onchange="cambiarIdiomaDashboard(this.value)"
        >
          <option value="es">ðŸ‡ªðŸ‡¸ EspaÃ±ol</option>
          <option value="en">ðŸ‡ºðŸ‡¸ English</option>
        </select>
      </div>
    </header>

    <!-- MAIN DASHBOARD -->
    <main class="dashboard-main">
      <!-- PERFIL EMPRESA -->
      <section class="dashboard-card profile-card" id="inicio">
        <h2 id="perfil-title">Perfil Empresa</h2>
        <p><strong id="nombre-text">Nombre:</strong> {{ nombre }}</p>
        <p><strong id="rut-text">RUT:</strong> {{ rut }}</p>
        <p><strong id="rubro-text">Rubro:</strong> {{ rubro }}</p>
        <p><strong id="contacto-text">Contacto:</strong> {{ contacto }}</p>
        <a
          href="{{ url_for('editar_perfil') }}"
          class="btn-primary"
          id="btn-editar-perfil"
          >Editar Perfil</a
        >
      </section>

      <!-- TRABAJOS -->
      <section class="dashboard-card" id="trabajos">
        <h2 id="trabajos-title">Ofertas de Trabajo</h2>
        <a
          href="{{ url_for('crear_trabajo') }}"
          class="btn-primary"
          id="btn-crear-trabajo"
          >Ingresar Trabajo</a
        >
        {% if trabajos %} {% for trabajo in trabajos %}
        <article class="trabajo-item">
          <p>
            <strong>{{ trabajo.titulo }}</strong> - {{ trabajo.descripcion }}
          </p>
          <a
            href="{{ url_for('editar_trabajo', id=trabajo.id) }}"
            class="btn-secondary2"
            >Modificar</a
          >
          <a
            href="{{ url_for('eliminar_trabajo', id=trabajo.id) }}"
            class="btn-danger"
            >Eliminar</a
          >
        </article>
        {% endfor %} {% else %}
        <p id="no-trabajos">No hay trabajos publicados.</p>
        {% endif %}
      </section>

      <!-- PRACTICAS -->
      <section class="dashboard-card" id="practicas">
        <h2 id="practicas-title">PrÃ¡cticas Profesionales</h2>
        <a
          href="{{ url_for('crear_practica') }}"
          class="btn-primary"
          id="btn-crear-practica"
          >Ingresar PrÃ¡ctica</a
        >
        {% if practicas %} {% for practica in practicas %}
        <article class="practica-item">
          <p>
            <strong>{{ practica.titulo }}</strong> - {{ practica.descripcion }}
          </p>
          <a
            href="{{ url_for('editar_practica', id=practica.id) }}"
            class="btn-secondary2"
            >Modificar</a
          >
          <a
            href="{{ url_for('eliminar_practica', id=practica.id) }}"
            class="btn-danger"
            >Eliminar</a
          >
        </article>
        {% endfor %} {% else %}
        <p id="no-practicas">No hay prÃ¡cticas disponibles.</p>
        {% endif %}
      </section>
    </main>

    <!-- NAV MOBILE -->
    <nav class="mobile-nav" role="navigation" aria-label="Mobile Navigation">
      <a href="#inicio" id="mobile-inicio"
        ><i class="fas fa-home"></i><span>Inicio</span></a
      >
      <a href="#trabajos" id="mobile-trabajos"
        ><i class="fas fa-briefcase"></i><span>Trabajos</span></a
      >
      <a href="#practicas" id="mobile-practicas"
        ><i class="fas fa-building"></i><span>PrÃ¡cticas</span></a
      >
      <a href="{{ url_for('perfil') }}" id="mobile-perfil"
        ><i class="fas fa-user"></i><span>Perfil</span></a
      >
    </nav>

    <!-- SCRIPT DE IDIOMAS -->
    <script>
      const traduccionesDashboard = {
        es: {
          "title-text": "Dashboard Empresa - Legado TP",
          "nav-inicio": "Inicio",
          "nav-trabajos": "Trabajos",
          "nav-practicas": "PrÃ¡cticas",
          "nav-perfil": "Perfil",
          "welcome-text": "Bienvenido, {{ nombre }}",
          "perfil-title": "Perfil Empresa",
          "nombre-text": "Nombre:",
          "rut-text": "RUT:",
          "rubro-text": "Rubro:",
          "contacto-text": "Contacto:",
          "btn-editar-perfil": "Editar Perfil",
          "trabajos-title": "Ofertas de Trabajo",
          "btn-crear-trabajo": "Ingresar Trabajo",
          "no-trabajos": "No hay trabajos publicados.",
          "practicas-title": "PrÃ¡cticas Profesionales",
          "btn-crear-practica": "Ingresar PrÃ¡ctica",
          "no-practicas": "No hay prÃ¡cticas disponibles.",
          "mobile-inicio": "Inicio",
          "mobile-trabajos": "Trabajos",
          "mobile-practicas": "PrÃ¡cticas",
          "mobile-perfil": "Perfil",
        },
        en: {
          "title-text": "Company Dashboard - Legado TP",
          "nav-inicio": "Home",
          "nav-trabajos": "Jobs",
          "nav-practicas": "Internships",
          "nav-perfil": "Profile",
          "welcome-text": "Welcome, {{ nombre }}",
          "perfil-title": "Company Profile",
          "nombre-text": "Name:",
          "rut-text": "RUT:",
          "rubro-text": "Industry:",
          "contacto-text": "Contact:",
          "btn-editar-perfil": "Edit Profile",
          "trabajos-title": "Job Offers",
          "btn-crear-trabajo": "Add Job",
          "no-trabajos": "No job offers available.",
          "practicas-title": "Internships",
          "btn-crear-practica": "Add Internship",
          "no-practicas": "No internships available.",
          "mobile-inicio": "Home",
          "mobile-trabajos": "Jobs",
          "mobile-practicas": "Internships",
          "mobile-perfil": "Profile",
        },
      };

      function cambiarIdiomaDashboard(lang) {
        localStorage.setItem("lang", lang);
        const elementos = traduccionesDashboard[lang];
        Object.keys(elementos).forEach((id) => {
          const el = document.getElementById(id);
          if (el) el.textContent = elementos[id];
        });
        document.title = elementos["title-text"];
      }

      document.addEventListener("DOMContentLoaded", () => {
        const langGuardado = localStorage.getItem("lang") || "es";
        document.getElementById("language-select").value = langGuardado;
        cambiarIdiomaDashboard(langGuardado);
      });
    </script>
  </body>
</html>
